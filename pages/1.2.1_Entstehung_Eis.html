<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1.2.1 Entstehung Eis - Gletscher Dokumentation</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --text-color: #333;
            --background-color: #f5f5f5;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            min-height: 100vh;
        }

        .content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        section {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 6px var(--shadow-color);
            margin-bottom: 20px;
        }

        h2 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        p {
            margin-bottom: 1rem;
        }

        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        canvas {
            border: 2px solid var(--primary-color);
            border-radius: 5px;
            background: white;
            max-width: 100%;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            margin: 1rem 0;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .nav-button {
            display: inline-block;
            padding: 1rem 2rem;
            background-color: var(--primary-color);
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: all 0.3s ease;
            text-align: center;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            width: 100%;
        }

        .nav-button:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px var(--shadow-color);
        }

        .decision-buttons {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            margin-top: 1rem;
        }

        .decision-button {
            background-color: #e0e0e0;
            color: var(--text-color);
        }

        .decision-button:hover {
            background-color: #d0d0d0;
        }

        .hidden {
            display: none;
        }

        button {
            padding: 0.5rem 1rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        button:hover {
            background-color: var(--secondary-color);
        }

        input[type="color"] {
            width: 50px;
            height: 50px;
            padding: 0;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: center;
            }

            .control-group {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="content">
        <section class="info">
            <h2>Die Entstehung von Eis</h2>
            <p>Die Umwandlung von Schnee zu Gletschereis ist ein faszinierender Prozess, der mehrere Jahre bis Jahrhunderte dauern kann. Der Prozess beginnt mit der Verdichtung von Schnee unter seinem eigenen Gewicht. Durch den Druck und die Temperaturschwankungen verändert sich die Struktur der Schneekristalle:</p>
            <ul>
                <li>Zuerst bildet sich Firn, eine körnige Zwischenstufe</li>
                <li>Durch weiteren Druck verdichten sich die Kristalle</li>
                <li>Die Luft wird nach und nach aus dem Eis gepresst</li>
                <li>Es entsteht kompaktes Gletschereis mit einer Dichte von etwa 0,9 g/cm³</li>
            </ul>
            <p>Die Kristallstruktur des Eises ist dabei von entscheidender Bedeutung für die Eigenschaften des Gletschers. Jeder Kristall hat eine einzigartige hexagonale Struktur, die durch die Anordnung der Wassermoleküle entsteht.</p>
        </section>

        <section class="game">
            <h2>Eiskristall-Generator</h2>
            <div class="game-container">
                <canvas id="crystalCanvas" width="500" height="500"></canvas>
                <div class="controls">
                    <div class="control-group">
                        <label for="colorPicker">Kristallfarbe:</label>
                        <input type="color" id="colorPicker" value="#3498db">
                    </div>
                    <div class="control-group">
                        <label for="symmetry">Symmetrie:</label>
                        <input type="range" id="symmetry" min="3" max="12" value="6">
                    </div>
                    <div class="control-group">
                        <label for="complexity">Komplexität:</label>
                        <input type="range" id="complexity" min="1" max="10" value="5">
                    </div>
                    <button id="generateBtn">Neuer Kristall</button>
                    <button id="downloadBtn">Kristall speichern</button>
                </div>
            </div>
        </section>

        <section class="decision-buttons">
            <a href="1.0_Kapitel_1_-_Entstehung_Gletscher.html" class="nav-button">Zurück zur Kapitelübersicht</a>
            <a href="../0_Index_Normal.html" class="nav-button">Zurück zum Index</a>
            <a href="1.2_Entstehung_Gletscher.html" class="nav-button">Zurück zur vorherigen Seite</a>

            <div id="natureDecisions" class="decision-buttons hidden">
                <a href="2.1_Ausdehnung_in_der_Schweiz.html" class="nav-button decision-button">2.1 Ausdehnung in der Schweiz</a>
                <a href="3.1_Karte_Rückgang.html" class="nav-button decision-button">3.1 Karte Rückgang</a>
                <a href="4.2.1_Konservierung_im_Eis.html" class="nav-button decision-button">4.2.1 Konservierung im Eis</a>
            </div>

            <div id="freeDecisions" class="decision-buttons hidden">
                <a href="2.1_Ausdehnung_in_der_Schweiz.html" class="nav-button decision-button">2.1 Ausdehnung in der Schweiz</a>
                <a href="4.2.1_Konservierung_im_Eis.html" class="nav-button decision-button">4.2.1 Konservierung im Eis</a>
            </div>
        </section>
    </div>

    <script>
        // Canvas setup
        const canvas = document.getElementById('crystalCanvas');
        const ctx = canvas.getContext('2d');
        const colorPicker = document.getElementById('colorPicker');
        const symmetrySlider = document.getElementById('symmetry');
        const complexitySlider = document.getElementById('complexity');
        const generateBtn = document.getElementById('generateBtn');
        const downloadBtn = document.getElementById('downloadBtn');

        // Make canvas responsive
        function resizeCanvas() {
            const container = canvas.parentElement;
            const size = Math.min(container.clientWidth - 40, 500);
            canvas.width = size;
            canvas.height = size;
            generateCrystal();
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function generateCrystal() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(canvas.width, canvas.height) * 0.4;
            const symmetry = parseInt(symmetrySlider.value);
            const complexity = parseInt(complexitySlider.value);
            const color = colorPicker.value;

            ctx.strokeStyle = color;
            ctx.lineWidth = 2;

            for (let i = 0; i < symmetry; i++) {
                const angle = (i * 2 * Math.PI) / symmetry;
                drawBranch(centerX, centerY, angle, radius, complexity);
            }
        }

        function drawBranch(x, y, angle, length, complexity) {
            if (complexity <= 0) return;

            const endX = x + Math.cos(angle) * length;
            const endY = y + Math.sin(angle) * length;

            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(endX, endY);
            ctx.stroke();

            const newLength = length * 0.7;
            const newComplexity = complexity - 1;

            // Draw sub-branches
            drawBranch(endX, endY, angle + 0.2, newLength, newComplexity);
            drawBranch(endX, endY, angle - 0.2, newLength, newComplexity);
        }

        // Event listeners
        generateBtn.addEventListener('click', generateCrystal);
        colorPicker.addEventListener('input', generateCrystal);
        symmetrySlider.addEventListener('input', generateCrystal);
        complexitySlider.addEventListener('input', generateCrystal);

        downloadBtn.addEventListener('click', () => {
            const link = document.createElement('a');
            link.download = 'eiskristall.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        });

        // Generate initial crystal
        generateCrystal();

        // Route type logic
        document.addEventListener('DOMContentLoaded', function() {
            const routeType = localStorage.getItem('routeType');
            const natureDecisions = document.getElementById('natureDecisions');
            const freeDecisions = document.getElementById('freeDecisions');

            if (routeType === 'natur') {
                natureDecisions.classList.remove('hidden');
            } else if (routeType === 'frei') {
                freeDecisions.classList.remove('hidden');
            }
        });
    </script>
</body>
</html> 